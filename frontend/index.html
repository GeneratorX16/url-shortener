<html lang="en-US">

<head>
    <title>Bare Bones URL Shortener</title>
</head>

<body>
    <h1>Shorten URLs</h1>
    <input type="url" name="url-input" aria-label="Enter URL to shorten" />
    <button type="button">Shorten</button>
    <p>Shortened Url: <span id="result"></span></p>
</body>
<script>
    const submitBtn = document.querySelector('button');
    const input = document.querySelector('input');
    const output = document.querySelector('#result');
    const url = window.location.href;

    submitBtn.addEventListener('click', async () => {
        const inputText = input.value;
        const url = new URL(window.location.href);
        const res = await fetch(`${url}api?url=${input.value}`, {
            method: "POST",
            headers: {
                "Content-Type": "application/json"
            }
        });

        const result = await res.json();
        const shortenedUrl = result["output"] || "An Error Occurred";
        output.textContent = shortenedUrl;
    })
</script>

</html>